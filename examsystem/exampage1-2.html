<!DOCTYPE html>
<head>
  <meta charset="UTF-8">
  <!-- 其他标签 -->
  <style>
    .warehouse select {
      position: absolute;
      display: block;
      top: 461px; /* 调整为热区的上边界位置 */
      left: 189px; /* 调整为热区的左边界位置 */
      width: 282px;
      height: 44px;
      background-color: white;
    }
    .date_current input {
      position: absolute;
      display: block;
      top: 461px; /* 调整为热区的上边界位置 */
      left: 189px; /* 调整为热区的左边界位置 */
      width: 282px;
      height: 44px;
      background-color: white;
    }
    .people input {
      position: absolute;
      display: block;
      top: 461px; /* 调整为热区的上边界位置 */
      left: 189px; /* 调整为热区的左边界位置 */
      width: 282px;
      height: 44px;
      background-color: white;
    }
    .people_corner input {
      position: absolute;
      display: block;
      top: 461px; /* 调整为热区的上边界位置 */
      left: 189px; /* 调整为热区的左边界位置 */
      width: 282px;
      height: 44px;
      background-image: url('peoplecorner.png');
      color: white;
      font-weight: bold;
    }
  </style>
</head>
<body>
<div style="position: relative;">
  <!-- Image Map Generated by http://www.image-map.net/ -->
  <img id="myImage" src="exam1-2.png" usemap="#image-map">

  <map id="image-map" name="image-map">
    <area target="" alt="打印" title="打印" href="" coords="1538,788,1413,739" shape="rect">
    <area target="" alt="导出" title="导出" href="" coords="1557,739,1683,788" shape="rect">
    <area target="" alt="增加一行" title="增加一行" href="" coords="1698,739,1822,788" shape="rect">
    <area target="" alt="取消" title="取消" href="" coords="824,884,948,932" shape="rect">
    <area target="" alt="提交" title="提交" href="" coords="968,884,1091,929" shape="rect">
    <area target="" alt="入库仓库" title="入库仓库" href="" coords="807,460,1248,499" shape="rect">
    <area target="" alt="单据号" title="单据号" href="" coords="192,390,617,434" shape="rect">
    <area target="" alt="制单人" title="制单人" href="" coords="809,387,1240,436" shape="rect">
    <area target="" alt="制单日期" title="制单日期" href="" coords="1421,388,1854,432" shape="rect">
    <area target="" alt="入库门店" title="入库门店" href="" coords="198,453,626,500" shape="rect">
    <area target="" alt="经营主体" title="经营主体" href="" coords="1421,455,1861,502" shape="rect">
    <area target="" alt="人" title="人" href="" coords="1586,156,1664,195" shape="rect">
  </map>
  <div class="warehouse">
    <select>
      <option value="请选择">请选择</option>
      <option value="广场天翼手机卖场-元丰第一仓库">广场天翼手机卖场-元丰第一仓库</option>
      <option value="广场天翼手机卖场-元丰第二仓库">广场天翼手机卖场-元丰第二仓库</option>
    </select>
  </div>
  <div class="date_current">
    <input type="text" placeholder="" disabled>
  </div>
  <div class="people">
    <input type="text" placeholder="" disabled>
  </div>
  <div class="people_corner">
    <input type="text" placeholder="" disabled>
  </div>
</div>
<script>
  window.onload = function() {
  const imageMap = document.querySelector('map');
  const terminalArea = imageMap.querySelector('area[alt="增加一行"]');


  const myImage = document.querySelector('#myImage');

    //1.拿到原始图片的尺寸
    const img = document.getElementById('myImage');
    const originalWidth = img.width;


    //2.根据屏幕大小调整图片大小 ，此处减了500px
    myImage.style.width = `${window.innerWidth - 100}px`;
    const newWidth = myImage.width;
    const widthRatio = newWidth / originalWidth;

    const warehouseInputElement = document.querySelector('.warehouse select');
    const hotAreaCoords3 = [807,460,1248,499];
    warehouseInputElement.style.left = `${(hotAreaCoords3[0]) * widthRatio}px`;
    warehouseInputElement.style.top = `${(hotAreaCoords3[1]) * widthRatio}px`;
    warehouseInputElement.style.width = `${(hotAreaCoords3[2] - hotAreaCoords3[0]) * widthRatio}px`;
    warehouseInputElement.style.height = `${(hotAreaCoords3[3] - hotAreaCoords3[1]) * widthRatio}px`;

    warehouseInputElement.addEventListener("change", function() {
      var selectedValue = this.value;
      localStorage.setItem("warehouse", selectedValue);
    });

    const peopleMaker = document.querySelector('.people input');
    const peopleMakerHotArea = [809,387,1240,436];
    peopleMaker.style.left = `${(peopleMakerHotArea[0]) * widthRatio}px`;
    peopleMaker.style.top = `${(peopleMakerHotArea[1]) * widthRatio}px`;
    peopleMaker.style.width = `${(peopleMakerHotArea[2] - peopleMakerHotArea[0]) * widthRatio}px`;
    peopleMaker.style.height = `${(peopleMakerHotArea[3] - peopleMakerHotArea[1]) * widthRatio}px`;

    peopleMaker.value = localStorage.getItem('name');

    const peopleMakerCorner = document.querySelector('.people_corner input');
    const peopleMakerCornerHotArea = [1586,156,1664,195];
    peopleMakerCorner.style.left = `${(peopleMakerCornerHotArea[0]) * widthRatio}px`;
    peopleMakerCorner.style.top = `${(peopleMakerCornerHotArea[1]) * widthRatio}px`;
    peopleMakerCorner.style.width = `${(peopleMakerCornerHotArea[2] - peopleMakerCornerHotArea[0]) * widthRatio}px`;
    peopleMakerCorner.style.height = `${(peopleMakerCornerHotArea[3] - peopleMakerCornerHotArea[1]) * widthRatio}px`;

    peopleMakerCorner.value = localStorage.getItem('name');

    //日期获取当前系统日期显示
    const inputElementDateCurrent = document.querySelector('.date_current input');
    const hotAreaCoordsDateCurrent = [1421,388,1854,432];
    inputElementDateCurrent.style.left = `${(hotAreaCoordsDateCurrent[0]) * widthRatio}px`;
    inputElementDateCurrent.style.top = `${(hotAreaCoordsDateCurrent[1]) * widthRatio}px`;
    inputElementDateCurrent.style.width = `${(hotAreaCoordsDateCurrent[2] - hotAreaCoordsDateCurrent[0]) * widthRatio}px`;
    inputElementDateCurrent.style.height = `${(hotAreaCoordsDateCurrent[3] - hotAreaCoordsDateCurrent[1]) * widthRatio}px`;

    var selectedValue = warehouseInputElement.options[warehouseInputElement.selectedIndex].value;
    var selectedText = warehouseInputElement.options[warehouseInputElement.selectedIndex].text;
    localStorage.setItem('warehouse', selectedText);

    // Create a new Date object
    var currentDate = new Date();

// Get the current date and time components
    var year = currentDate.getFullYear();
    var month = currentDate.getMonth() + 1; // Note: January is 0
    var day = currentDate.getDate();
    var hours = currentDate.getHours();
    var minutes = currentDate.getMinutes();
    var seconds = currentDate.getSeconds();

// Format the date and time as desired
    var formattedDateTime = `${year}-${month}-${day} ${hours}:${minutes}:${seconds}`;

    inputElementDateCurrent.value = formattedDateTime;


    //3.适配屏幕之后的热区坐标
    const hotAreaCoords = [1698,739,1822,788];
    const newHotAreaCoords = hotAreaCoords.map(coord => coord * widthRatio);

    //4.调整每一个热区坐标在调整分辨率之后
    const areas = document.querySelectorAll('#image-map area');
    areas.forEach((area) => {
      const coords = area.getAttribute('coords').split(',');
      const newCoords = coords.map((coord) => {
        return coord * widthRatio
      });
      area.setAttribute('coords', newCoords.join(','));
      console.log(newCoords)
    });

  // 监听整个图片区域点击事件
  imageMap.addEventListener('click', function(event) {
    event.preventDefault();

    // 判断点击位置是否在热区范围内，如果不是则提示考试失败
    if (event.clientX < newHotAreaCoords[0] || event.clientX > newHotAreaCoords[2] || event.clientY < newHotAreaCoords[1] || event.clientY > newHotAreaCoords[3]) {
      window.location.href = 'newpage.html';
    }
  });

  // 监听热区点击事件
  terminalArea.addEventListener('click', function(event) {
    event.preventDefault();
    // 模拟操作成功，提示用户进行下一步
    window.location.href = 'exampage1-3.html';
  });}
</script>
</body>
